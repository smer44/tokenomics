# Дизайн-документ игры

## Общая концепция

Игра представляет собой симуляцию мультиагентной системы, где игрок управляет взаимодействием людей, агентов и фабрик в ограниченном пространстве. Цель игры — достичь баланса между счастьем людей, эффективностью агентов и производством фабрик, удовлетворяя потребности людей и оптимизируя использование ресурсов.

## Основные сущности

### 1. Человек

#### Характеристики:

- Счастье (от 0 до 100): Основной показатель состояния человека.
  Начальное значение: 50.
  Увеличивается, если потребности удовлетворены.
  Уменьшается, если потребности не удовлетворены или баланс токенов агента равен 0.
- Скорость генерации токенов: От 5 до 10 токенов за ход.
  Если счастье падает ниже 20, скорость генерации снижается до 3–6 токенов.
- Потребности:
  С вероятностью 10% за ход у человека возникает случайная потребность: 1. Простая: требует один случайный ресурс. 2. Средняя: требует три случайных ресурса. 3. Сложная: требует все четыре ресурса.
- Если потребность не удовлетворена за 3 хода, счастье начинает падать:

  - Простая: -1 за ход.
  - Средняя: -2 за ход.
  - Сложная: -3 за ход.

- Если потребность удовлетворена, счастье увеличивается:

  - Простая: +5.
  - Средняя: +8.
  - Сложная: +10.

- Критическое состояние:
  - При счастье = 0 человек перестаёт генерировать токены и заказы.

### 2. Агент

#### Характеристики:

- Координаты: Позиция на поле (x, y).
- Баланс токенов: Количество токенов, которые агент может использовать для выполнения задач.
  - Начальный баланс: 20 токенов.
  - Если баланс падает до 0, человек теряет 2 счастья за ход.
- Текущая задача: Что агент делает в данный момент:
  1. Сбор ресурсов: Собирает ресурсы с поля или других фабрик.
  2. Доставка ресурсов: Перемещает ресурсы между фабриками или к человеку.
  3. Обслуживание фабрики: Работает на фабрике для производства продукции.
- Ограничения:
  - Может выполнять только одну задачу за ход.
  - Скорость перемещения: 5 клеток за ход.
  - Если задача не выполнена за 2 хода, агент увеличивает стоимость рецепта на +1 токен за каждый ресурс (максимум +3).

### 3. Фабрика

#### Характеристики:

- Координаты: Позиция на поле (x, y).
- Производимая продукция: Тип товара, который фабрика выпускает.
  Продукты могут быть простыми (требуют 1–2 ресурса) или сложными (требуют 3–4 ресурса).
- Специализация: Каждая фабрика может обрабатывать только 3 из 4 ресурсов (например, a, b, c или b, c, d).
- Производительность: От 1 до 3 единиц продукции за ход.
- Очередь заказов: Если несколько агентов одновременно запрашивают продукцию, они выстраиваются в очередь.
- Развитие: Игрок может инвестировать токены, чтобы увеличить производительность или расширить ассортимент продукции.

### 4. Ресурсы

- Типы ресурсов: a, b, c, d.
- Цена ресурсов в токенах:
  - a = 1 токен.
  - b = 2 токена.
  - c = 3 токена.
  - d = 4 токена.
- Ограниченность:

  - Начальное количество:

    - a: 50 единиц.
    - b: 30 единиц.
    - c: 20 единиц.
    - d: 10 единиц.

  - Ресурсы появляются случайным образом на поле (например, 1–2 единицы за ход).

- Динамика цен:
  - Если ресурс становится редким (меньше 10 единиц), его цена увеличивается вдвое.

## Правила взаимодействия

### 1. Генерация токенов

- Каждый человек генерирует случайное количество токенов (от 5 до 10) за ход.
- Если счастье человека падает ниже 20, скорость генерации снижается до 3–6 токенов.

### 2. Потребности

- С вероятностью 10% за ход у человека возникает случайная потребность:

  - Простая: требует один случайный ресурс.
  - Средняя: требует три случайных ресурса.
  - Сложная: требует все четыре ресурса.

- Если потребность не удовлетворена за 3 хода, счастье начинает падать:

  - Простая: -1 за ход.
  - Средняя: -2 за ход.
  - Сложная: -3 за ход.

- Если потребность удовлетворена, счастье увеличивается:
  - Простая: +5.
  - Средняя: +8.
  - Сложная: +10.

### 3. Действия агентов

- Агенты выполняют задачи:
  - Сбор ресурсов: Собирают ресурсы с поля или других фабрик.
  - Доставка ресурсов: Перемещают ресурсы между фабриками или к человеку.
  - Обслуживание фабрики: Работают на фабрике для производства продукции.
- Если задача не выполнена за 2 хода, агент увеличивает стоимость рецепта на +1 токен за каждый ресурс (максимум +3).

### 4. Производство фабрик

- Фабрики производят продукцию, если у них достаточно ресурсов и токенов.
- Если продукт требует все 4 ресурса, а фабрика не может обработать один из них, агент доставляет недостающий ресурс с ближайшей свободной фабрики.

### 5. Доставка заказа

- Когда заказ готов, агент доставляет его от фабрики к человеку со скоростью 5 клеток за ход.
- Если заказ не доставлен за 5 ходов, человек теряет счастье (-1 за каждый пропущенный ход).

## Игровой цикл

1. Генерация токенов: Люди генерируют токены.
2. Потребности: У людей возникают случайные потребности.
3. Действия агентов: Агенты выполняют задачи.
4. Производство фабрик: Фабрики производят продукцию.
5. Обновление параметров: Обновляются счастье людей, баланс токенов агентов и ресурсы на поле.

## Дополнительные механики

- События на поле:
  - Заторы на дорогах.
  - Технологический сбой.
  - Бонусные ресурсы.
- Многопользовательский режим: Конкуренция за ресурсы, фабрики и агентов.
